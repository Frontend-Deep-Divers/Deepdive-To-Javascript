# 4장 변수

## 4.1 변수란 무엇인가? 왜 필요한가?

- **변수**
    - 하나의 값을 저장하기 위해 확보한 메모리 공간 자체 또는 그 메모리 공간을 식별하기 위해 붙인 이름
    - 값의 위치를 가리키는 상징적인 이름
    - 객체나 배열 같은 자료구조를 이용하면 여러 개의 값을 하나로 그룹화 하여 하나의 값으로 사용할 수 있다.
- 할당
    - 변수에 값을 저장하는 것
- 참조
    - 변수에 저장된 값을 읽어 들이는 것

## 4.2 식별자

- 어떤 값을 구별해서 식별할 수 있는 고유한 이름
- 값이 아니라 메모리 주소를 기억하고 있음. 식별자가 기억하고 있는 메모리 주소를 통해 메모리 공간에 저장된 값에 접근할 수 있다는 의미
- 변수, 함수, 클래스 등의 이름과 같은 식별자는 네이밍 규칙을 준수해야 함

## 4.3 변수 선언

- 변수를 생성하기 위해서 값을 저장하기 위한 메모리 공간을 확보하고 변수 이름과 확보된 메모리 공간의 주소를 연결해서 값을 저장할 수 있게 준비하는 것
- 변수를 사용하려면 반드시 선언이 필요하며, var, let, const  키워드를 사용함

> ❓ **키워드
자바 스크립트 코드를 해석하고 실행하는 자바스크립트 엔진이 수행할 동작을 규정한 일종의 명령어
자바 스크립트 엔진은 키워드를 만나면 자신이 수행해야 할 약속된 동작을 수행함
(예를 들어, var 키워드를 만나면 자바스크립트 엔진은 뒤에 오는 변수 이름으로 새로운 변수를 선언)**
> 

- 자바 스크립트 엔진은 변수 선언을 2단계에 걸쳐서 수행
    - 선언 단계 : 변수 이름을 등록해서 자바 스크립트 엔진에 변수의 존재를 알림
    - 초기화 단계 : 값을 저장하기 위한 메모리 공간을 확보하고 암묵적으로 undefined를 할당해 초기화
- var 키워드를 사용한 변수 선언은 선언 단계와 초기화 단계가 동시에 진행됨. 초기화 단계를 거치지 않으면 이전에 다른 어플리케이션이 사용했던 값이 남아있는 경우가 생기게 되는데, var 키워드는 암묵적으로 초기화를 수행하므로 쓰레기 값에서 안전함
- 선언하지 않은 식별자에 접근하면 자바 스크립트 엔진이 등록된 식별자를 찾을 수 없다는 에러를 발생시킴(reference error)

## 4.4 변수 선언의 실행 시점과 변수 호이스팅

- 변수 선언은 변수 참조하는 코드보다 앞에 있는 경우 undefined 가 됨
    - 변수 선언이 소스코드가 한 줄씩 순차적으로 실행되는 시점, 런타임이 아니라 이전 단계에서 먼저 실행되기 때문
    - 자바 스크립트 엔진은 소스코드를 실행하기 전 준비 단계인 평가 과정에서 변수 선언을 포함한 모든 선언문(변수, 함수 선언문 등)을 소스코드에서 찾아 먼저 실행한다. 이후에 소스코드를 순차적으로 실행한다. 따라서 변수 선언이 소스코드의 어디에 위치하던 상관없이 변수를 참조할 수 있다.
- **변수 호이스팅**
    - 변수 선언문이 코드의 선두로 끌어올려진 것처럼 동작하는 자바 스크립트 고유 특징
    - 변수 뿐만 아니라 키워드를 사용해서 선언하는 모든 식별자는 호이스팅된다. 모든 선언문은 런타임 이전 단계에서 먼저 실행되기 때문이다.

## 4.5 값의 할당

- 변수 선언과 값의 할당은 실행 시점이 다르다.
- 변수 선언은 소스코드가 순차적으로 실행되는 시점인 런타임 이전에 먼저 실행되지만 값의 할당은 소스코드가 순차적으로 실행되는 시점인 런타임에 실행이 된다.

![스크린샷 2025-03-17 오후 1.23.37.png](4%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%87%E1%85%A7%E1%86%AB%E1%84%89%E1%85%AE%201b9f78a2bff1802fa9dfe4cc21ded4c5/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2025-03-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_1.23.37.png)

- 그림처럼 변수를 선언하고 값을 할당하면 undefined로 할당된 주소와 다른 주소에 값이 할당되게 된다.
    - 이는 원시 타입인 경우에 해당된다. 원시 타입의 경우 값 자체를 저장하며 새로운 값을 할당하면 기존 메모리 주소와 다른 새 주소에 값을 저장하게 된다.
    - 객체 타입 (object, array, function) 의 경우 메모리 주소(참조값)를 저장하며, 변수에 값을 할당하면 새로운 주소를 참조하는 것이 아닌 기존 객체의 주소(참조)를 저장하게 됨

```jsx
console.log(score); // undefined

score = 80; // 값의 할당
var score; // 변수 선언

console.log(score); //80
```

- 위의 코드는 var로 선언했기 때문에 변수 호이스팅이 발생하여 실제로는 이렇게 동작함
    
    ```jsx
    var score; // 변수 선언
    console.log(score); // undefined
    score = 80; // 값의 할당
    console.log(score); //80
    ```
    

> ❓ **var, let, const 의 차이**
> 
> 
> 
> | 특징 | `var` | `let` | `const` |
> | --- | --- | --- | --- |
> | **재할당**  | ✅ 가능 | ✅ 가능 | ❌ 불가능 |
> | **재선언** | ✅ 가능 | ❌ 불가능 | ❌ 불가능 |
> | **호이스팅** | ✅ 선언만 호이스팅 (초기값 `undefined`) | ✅ 선언만 호이스팅 (TDZ 존재) | ✅ 선언만 호이스팅 (TDZ 존재) |
> | **블록 스코프** | ❌ 없음 (함수 스코프) | ✅ 있음 | ✅ 있음 |
> | **전역 객체(`window`) 등록** | ✅ 등록됨 | ❌ 등록되지 않음 | ❌ 등록되지 않음 |

> ❓ TDZ 란?
> 
> - `let`, `const` 로 선언된 변수에 접근할 수 없는 시간 구간. **변수가 선언되었지만, 초기화되기 전까지 접근하려 하면 ReferenceError 가 발생하는 영역**
> - 자바 스크립트에서 변수 선언은 호이스팅되지만 `let` 과 `const`는 초기화가 선언문에서 이루어지므로 선언 이전에는 접근할 수 없음.
> - `var` 키워드는 호이스팅으로 선언 전에 접근이 가능했지만 값은 undefined로 초기화 되어 예상치 못한 버그가 발생할 가능성이 컸음.
> - 따라서 `let`, `const`를 사용할 때 선언되었지만 초기화 되기 전에 접근하면 ReferenceError를 발생시켜 버그를 방지하고자 함 (TDZ가 없다면 `const`가 undefined 상태가 되어 변경될 수 없는 값이라는 원칙과 모순됨..)
> - 개발자가 실수를 줄이도록 돕는 기능

> ❓**함수 스코프와 블록 스코프**
> 
> - 스코프
>     - 변수의 유효 범위
>     - 어디에서 변수를 선언하고 어디까지 접근할 수 있는지를 결정하는 규칙
> - 함수 스코프
>     - 변수가 선언된 함수 내에서만 접근 가능하고 함수 밖에서는 접근할 수 없는 스코프
>     - `var`
>     - 함수 내부에서 선언된 변수는 함수 바깥에서 접근할 수 없음.
>     - `{}` 블록은 무시함
> - 블록 스코프
>     - `{}`중괄호로 감싸진 블록 내에서만 변수가 유효한 스코프
>     - `let`, `const`
>     - if 문, for 문, while 문, 함수 내부 등 모든 `{}` 블록 안에서만 변수 접근 가능

## 4.6 값의 재할당

- 상수
    - 값을 재할당할 수 없어서 변수에 저장된 값을 변경할 수 없는 값.
    - 한 번만 할당할 수 있는 변수
- 변수에 값을 재할당하면 이전 값이 저장되어 있던 메모리 공간을 지우고 새롭게 저장하는 것이 아닌 새로운 메모리 공간을 확보하고 그 메모리 공간에 새로운 값을 저장함
- 이후 불필요한 값들은 가비지 콜렉터에 의해 메모리에서 자동 해제됨

## 4.7 식별자 네이밍 규칙

- 식별자는 다음과 같은 네이밍 규칙을 준수해야함
    - 특수문자를 제외한 문자, 숫자, 언더스코어 ( _ ), 달러 기호 ($) 를 포함할 수 있음
    - 특수문자를 제외한 문자, 언더스코어, 달러 기호로 시작되어야 함
    - 예약어는 식별자로 사용할 수 없음
- 예약어
    - 프로그래밍 언어에서 사용되고 있거나 사용된 예정인 단어
    
    ![image.png](4%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%87%E1%85%A7%E1%86%AB%E1%84%89%E1%85%AE%201b9f78a2bff1802fa9dfe4cc21ded4c5/image.png)