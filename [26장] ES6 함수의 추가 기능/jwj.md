# 26μ¥ ES6 ν•¨μμ μ¶”κ°€ κΈ°λ¥

## 26.1 ν•¨μμ κµ¬λ¶„

ES6 μ΄μ „κΉμ§€ μλ°”μ¤ν¬λ¦½νΈμ ν•¨μλ” λ‹¤μ–‘ν• λ©μ μΌλ΅ μ‚¬μ©λκ³¤ ν–λ‹¤.

- μΌλ°μ μΈ ν•¨μλ΅ νΈμ¶
- `new`μ™€ ν•¨κ» νΈμ¶ν•΄ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•λ” μƒμ„±μ ν•¨μλ΅ νΈμ¶
- κ°μ²΄μ— λ°”μΈλ”©λμ–΄ λ©”μ„λ“λ΅μ„ νΈμ¶

νΈλ¦¬ν•κΈ΄ ν•μ§€λ§ μ‹¤μλ¥Ό μ λ°ν•κ³  μ„±λ¥ λ©΄μ—μ„λ„ μΆ‹μ§€ μ•μ•λ‹¤.

ES6 μ΄μ „μ λ¨λ“  ν•¨μλ” `callable`μ΄λ©΄μ„ `constructor`λ‹¤.

`constructor`λΌλ” κ²ƒμ€ ν•¨μκ°€ `prototype` ν”„λ΅νΌν‹°λ¥Ό κ°€μ§€λ©°, ν”„λ΅ν† νƒ€μ… κ°μ²΄λ„ μƒμ„±ν•λ‹¤λ” κ²ƒμ„ μλ―Έν•λ‹¤. μ΄λ” μ„±λ¥ λ©΄μ—μ„ μ λ¦¬ν•μ§€ μ•λ‹¤.

μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ ES6μ—μ„λ” ν•¨μλ¥Ό μ‚¬μ© λ©μ μ— λ”°λΌ μ„Έ κ°€μ§€ μΆ…λ¥λ΅ κµ¬λ¶„ν–λ‹¤.

| ES6 ν•¨μμ κµ¬λ¶„     | constructor | prototype | super | arguments |
| ------------------- | ----------- | --------- | ----- | --------- |
| μΌλ° ν•¨μ (Normal)  | β­•          | β­•        | β    | β­•        |
| λ©”μ„λ“ (Method)     | β          | β        | β­•    | β­•        |
| ν™”μ‚΄ν‘ ν•¨μ (Arrow) | β          | β        | β    | β        |

## 26.2 λ©”μ„λ“

**ES6 μ‚¬μ–‘μ—μ„ λ©”μ„λ“λ” λ©”μ„λ“ μ¶•μ•½ ν‘ν„μΌλ΅ μ •μλ ν•¨μλ§μ„ μλ―Έν•λ‹¤.**

λ©”μ„λ“λ” non-constructorλ‹¤. λ•λ¬Έμ— `prototype` ν”„λ΅νΌν‹°λ„ μ—†κ³  ν”„λ΅ν† νƒ€μ…λ„ μƒμ„±ν•μ§€ μ•λ”λ‹¤.

ν‘μ¤€ λΉνΈμΈ κ°μ²΄μ ν”„λ΅ν† νƒ€μ… λ©”μ„λ“μ™€ μ •μ  λ©”μ„λ“λ„ λ¨λ‘ non-constructorλ‹¤.

**ES6 λ©”μ„λ“λ” μμ‹ μ„ λ°”μΈλ”©ν• κ°μ²΄λ¥Ό κ°€λ¦¬ν‚¤λ” λ‚΄λ¶€ μ¬λ΅― `[[HomeObject]]`λ¥Ό κ°–λ”λ‹¤.** `super` μ°Έμ΅°(μνΌν΄λμ¤μ λ©”μ„λ“ μ°Έμ΅°)κ°€ μ΄λ£¨μ–΄μ§€κΈ° μ„ν•΄μ„ ν•„μ”ν•λ‹¤. ES6κ°€ μ•„λ‹ λ©”μ„λ“λ” `super` ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν•  μ μ—†λ‹¤.

λ©”μ„λ“λ¥Ό μ •μν•  λ• ν”„λ΅νΌν‹° κ°’μΌλ΅ μµλ… ν•¨μ ν‘ν„μ‹μ„ ν• λ‹Ήν•λ” ES6 μ΄μ „ λ°©μ‹μ€ μ‚¬μ©ν•μ§€ μ•λ” κ²ƒμ΄ μΆ‹λ‹¤.

## 26.3 ν™”μ‚΄ν‘ ν•¨μ

λ‚΄λ¶€ λ™μ‘μ΄ κΈ°μ΅΄ ν•¨μλ³΄λ‹¤ κ°„λµν•λ‹¤.

ν™”μ‚΄ν‘ ν•¨μλ” μ½λ°± ν•¨μ λ‚΄λ¶€μ—μ„ `this`κ°€ μ „μ—­ κ°μ²΄λ¥Ό κ°€λ¦¬ν‚¤λ” λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν• λ€μ•μΌλ΅ μ μ©ν•λ‹¤.

### ν™”μ‚΄ν‘ ν•¨μ μ •μ

- ν•¨μ μ •μ

  ν•¨μ ν‘ν„μ‹μΌλ΅λ§ μ •μν•  μ μλ‹¤.

  ```js
  const add = (x, y) => x + y;
  add(1, 2);
  ```

- λ§¤κ°λ³€μ μ„ μ–Έ

  λ§¤κ°λ³€μκ°€ μ—¬λ¬ κ°μΈ κ²½μ° μ†κ΄„νΈ μ•μ— λ§¤κ°λ³€μλ¥Ό μ„ μ–Έν•λ‹¤.

  λ§¤κ°λ³€μκ°€ ν• κ°μΈ κ²½μ° μ†κ΄„νΈλ¥Ό μƒλµν•  μ μλ‹¤.

  λ§¤κ°λ³€μκ°€ μ—†λ” κ²½μ° μ†κ΄„νΈλ¥Ό μƒλµν•  μ μ—†λ‹¤.

- ν•¨μ λΈμ²΄ μ •μ

  ν•¨μ λΈμ²΄κ°€ ν•λ‚μ λ¬ΈμΌλ΅ κµ¬μ„±λλ‹¤λ©΄ μ¤‘κ΄„νΈλ¥Ό μƒλµν•  μ μλ‹¤. μ΄λ• λ¬Έμ΄ κ°’μΌλ΅ ν‰κ°€λ  μ μλ” ν‘ν„μ‹μΈ λ¬Έμ΄λΌλ©΄ μ•”λ¬µμ μΌλ΅ λ°ν™λλ‹¤. ν‘ν„μ‹μ΄ μ•„λ‹ λ¬Έμ΄λ©΄ μ—λ¬λ¥Ό λ°μƒμ‹ν‚¨λ‹¤.

  ```js
  // concise body
  const power = (x) => x ** 2;
  power(2); // 4
  ```

  κ°μ²΄ λ¦¬ν„°λ΄μ„ λ°ν™ν•λ” κ²½μ° κ°μ²΄ λ¦¬ν„°λ΄μ„ μ†κ΄„νΈλ΅ κ°μ‹Έμ•Ό ν•λ‹¤.

  ν™”μ‚΄ν‘ ν•¨μλ„ μ¦‰μ‹ μ‹¤ν–‰ ν•¨μλ΅ μ‚¬μ©ν•  μ μλ‹¤.

  ```js
  const person = ((name) => ({
    sayHi() {
      return `Hello, ${name}`;
    },
  }))("Jeon");
  ```

  ν™”μ‚΄ν‘ ν•¨μλ¥Ό κ³ μ°¨ ν•¨μ μΈμλ΅ μ „λ‹¬ν•  μ μλ‹¤. ν‘ν„μ΄ κ°„κ²°ν•κ³  κ°€λ…μ„±μ΄ μΆ‹λ‹¤.

  ```js
  [1, 2, 3].map((v) => v * 2);
  ```

  π’΅ν™”μ‚΄ν‘ ν•¨μλ” μ½λ°± ν•¨μλ΅μ„ μ •μν•  λ• μ μ©ν•λ‹¤.

### ν™”μ‚΄ν‘ ν•¨μμ™€ μΌλ° ν•¨μμ μ°¨μ΄

1. ν™”μ‚΄ν‘ ν•¨μλ” μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•  μ μ—†λ” non-constructorλ‹¤.

2. μ¤‘λ³µλ λ§¤κ°λ³€μ μ΄λ¦„μ„ μ„ μ–Έν•  μ μ—†λ‹¤.

3. ν™”μ‚΄ν‘ ν•¨μλ” μμ²΄μ `this`, `arguments`, `super`, `new.target` λ°”μΈλ”©μ„ κ°–μ§€ μ•λ”λ‹¤.

λ”°λΌμ„ ν™”μ‚΄ν‘ ν•¨μ λ‚΄λ¶€μ—μ„ `this`, `arguments`, `super`, `new.target`μ„ μ°Έμ΅°ν•λ©΄ μ¤μ½”ν”„ μ²΄μΈμ„ ν†µν•΄ `this`, `arguments`, `super`, `new.target`μ„ μ°Έμ΅°ν•λ‹¤.

### `this`

μ½λ°± ν•¨μ λ‚΄λ¶€μ `this`λ” μ™Έλ¶€ ν•¨μμ `this`μ™€ λ‹¤λ¥Έ κ°μ²΄λ¥Ό κ°€λ¦¬ν‚¬ κ°€λ¥μ„±μ΄ μλ‹¤.

```js
class Prefixer {
  constructor(prefix) {
    this.prefix = prefix;
  }

  add(arr) {
    // add λ©”μ„λ“λ” μΈμλ΅ μ „λ‹¬λ λ°°μ—΄ arrμ„ μνν•λ©° λ°°μ—΄μ λ¨λ“  μ”μ†μ— prefixλ¥Ό μ¶”κ°€ν•λ‹¤.
    // β‘ 
    return arr.map(function (item) {
      return this.prefix + item; // β‘΅
      // -> TypeError: Cannot read property 'prefix' of undefined
    });
  }
}

const prefixer = new Prefixer("-webkit-");
console.log(prefixer.add(["transition", "user-select"]));
```

ν•΄κ²° λ°©λ²•μ€ λ‹¤μκ³Ό κ°™λ‹¤.

1. `add` λ©”μ„λ“λ¥Ό νΈμ¶ν• `prefixer` κ°μ²΄λ¥Ό κ°€λ¦¬ν‚¤λ” `this`λ¥Ό μΌλ‹¨ νν”Όμ‹ν‚¨ ν›„ μ½λ°± ν•¨μ λ‚΄λ¶€μ—μ„ μ‚¬μ©ν•λ‹¤.

```js
const that = this;
return arr.map(function (item) {
  return that.prefix + " " + item;
});
```

2. `Array.prototype.map`μ λ‘ λ²μ§Έ μΈμμ— `this`λ¥Ό μ „λ‹¬ν•λ‹¤.

```js
return arr.map(function (item) {
  return this.prefix + " " + item;
}, this);
```

3. `bind` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•μ—¬ `add` λ©”μ„λ“λ¥Ό νΈμ¶ν• `prefixer` κ°μ²΄λ¥Ό κ°€λ¦¬ν‚¤λ” `this`λ¥Ό λ°”μΈλ”©ν•λ‹¤.

```js
return arr.map(
  function (item) {
    return this.prefix + " " + item;
  }.bind(this);
);
```

ES6μ—μ„λ” ν™”μ‚΄ν‘ ν•¨μλ¥Ό μ‚¬μ©ν•λ©΄ μ΄ λ¬Έμ λ¥Ό μ‰½κ² ν•΄κ²°ν•  μ μλ‹¤.

ν™”μ‚΄ν‘ ν•¨μλ” ν•¨μ μμ²΄μ `this` λ°”μΈλ”©μ„ κ°–μ§€ μ•κ³ , ν™”μ‚΄ν‘ ν•¨μ λ‚΄λ¶€μ—μ„ `this`λ¥Ό μ°Έμ΅°ν•λ©΄ μƒμ„ μ¤μ½”ν”„μ `this`λ¥Ό κ·Έλ€λ΅ μ°Έμ΅°ν•λ‹¤. μ΄λ¥Ό lexical thisλΌκ³  ν•λ‹¤. λ ‰μ‹μ»¬ μ¤μ½”ν”„μ™€ κ°™μ΄ `this`κ°€ ν•¨μκ°€ μ •μλ μ„μΉμ— μν•΄ κ²°μ •λλ‹¤λ” κ²ƒμ„ μλ―Έν•λ‹¤.

ν™”μ‚΄ν‘ ν•¨μλ” ν•¨μ μμ²΄μ `this` λ°”μΈλ”©μ΄ μ—†μ–΄ `call`, `apply`, `bind` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•΄λ„ ν™”μ‚΄ν‘ ν•¨μ λ‚΄λ¶€μ `this` λ°”μΈλ”©μ„ κµμ²΄ν•  μ μ—†λ‹¤.

π’΅λ©”μ„λ“λ” λ©”μ„λ“ μ¶•μ•½ ν‘ν„μΌλ΅ μ„ μ–Έν•λ” κ²ƒμ΄ μΆ‹λ‹¤. (`this` λ°”μΈλ”©μ΄ μμ—°μ¤λ½μ§€ μ•λ‹¤.)

π’΅ν”„λ΅ν† νƒ€μ… κ°μ²΄μ— ν”„λ΅νΌν‹°λ¥Ό λ™μ μΌλ΅ μ¶”κ°€ν•κ³  μ‹¶μ„ λ• μΌλ° ν•¨μλ¥Ό ν• λ‹Ήν•λ‹¤. λ§μ•½ ES6 λ©”μ„λ“λ¥Ό λ™μ  μ¶”κ°€ν•κ³  μ‹¶μΌλ©΄ κ°μ²΄ λ¦¬ν„°λ΄μ„ ν†µν•΄ `constructor` ν”„λ΅νΌν‹°μ™€ μƒμ„±μ ν•¨μ κ°„μ μ—°κ²°μ„ μ¬μ„¤μ •ν•΄μ£Όμ–΄μ•Ό ν•λ‹¤.

```js
function Person(name) {
  this.name = name;
}

Person.prototype = {
  // constructor ν”„λ΅νΌν‹°μ™€ μƒμ„±μ ν•¨μ κ°„μ μ—°κ²°μ„ μ¬μ„¤μ •
  constructor: Person,
  sayHi() {
    console.log(`Hi ${this.name}`);
  },
};
```

ν΄λμ¤ ν•„λ“ μ •μ μ μ•μ„ μ‚¬μ©ν•μ—¬ ν΄λμ¤ ν•„λ“μ— ν™”μ‚΄ν‘ ν•¨μλ¥Ό ν• λ‹Ήν•  μλ„ μλ‹¤.

```js
// Bad
class Person {
  // ν΄λμ¤ ν•„λ“ μ •μ μ μ•
  name = "Lee";
  sayHi = () => console.log(`Hi ${this.name}`);
  // ν΄λμ¤ ν•„λ“ μ •μ μ μ•μ€ μ•„λ μ½”λ“μ™€ λ™μΌν•λ‹¤.
  //   constructor(name) {
  //     this.name = name;
  //     this.sayHi = () => console.log(`Hi ${this.name}`);
  //   }
}
```

β οΈν΄λμ¤ ν•„λ“μ— ν• λ‹Ήν• ν™”μ‚΄ν‘ ν•¨μλ” ν”„λ΅ν† νƒ€μ… λ©”μ„λ“κ°€ μ•„λ‹ μΈμ¤ν„΄μ¤ λ©”μ„λ“κ°€ λλ‹¤. λ”°λΌμ„ λ©”μ„λ“ μ •μ μ‹μ—” λ©”μ„λ“ μ¶•μ•½ ν‘ν„μ„ μ‚¬μ©ν•λ” κ²ƒμ΄ μΆ‹λ‹¤.

### `super`

ν™”μ‚΄ν‘ ν•¨μ λ‚΄λ¶€μ—μ„ `super`λ¥Ό μ°Έμ΅°ν•λ©΄ `this`μ™€ λ§μ°¬κ°€μ§€λ΅ μƒμ„ μ¤μ½”ν”„μ `super`λ¥Ό μ°Έμ΅°ν•λ‹¤.

### `arguments`

ν™”μ‚΄ν‘ ν•¨μλ” ν•¨μ μμ²΄μ `arguments` λ°”μΈλ”©μ΄ μ—†λ‹¤. `this`μ™€ λ§μ°¬κ°€μ§€λ΅ μƒμ„ μ¤μ½”ν”„μ `arguments`λ¥Ό μ°Έμ΅°ν•λ‹¤.

λ”°λΌμ„ ν™”μ‚΄ν‘ ν•¨μλ΅ κ°€λ³€ μΈμ ν•¨μλ¥Ό κµ¬ν„ν•΄μ•Ό ν•  λ• λ°λ“μ‹ Rest νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ‹¤.

## 26.4 Rest νλΌλ―Έν„°

### κΈ°λ³Έ λ¬Έλ²•

Rest νλΌλ―Έν„°(λ‚λ¨Έμ§€ λ§¤κ°λ³€μ)λ” λ§¤κ°λ³€μ μ΄λ¦„ μ•μ— μ„Έ κ°μ μ  `...`μ„ λ¶™μ—¬μ„ μ •μν• λ§¤κ°λ³€μλ¥Ό λ§ν•λ‹¤. **Rest νλΌλ―Έν„°λ” ν•¨μμ— μ „λ‹¬λ μΈμλ“¤μ λ©λ΅μ„ λ°°μ—΄λ΅ μ „λ‹¬λ°›λ”λ‹¤.**

```js
function foo(...rest) {
  console.log(rest); // [ 1, 2, 3 ]
}

foo(1, 2, 3);
```

μΌλ° λ§¤κ°λ³€μμ™€ ν•¨κ» μ‚¬μ©ν•  μλ„ μλ‹¤. μΈμλ“¤μ€ λ§¤κ°λ³€μμ™€ Rest νλΌλ―Έν„°μ— μμ°¨μ μΌλ΅ ν• λ‹Ήλλ‹¤.

```js
function foo(param, ...rest) {
  console.log(param); // 1
  console.log(rest); // [ 2, 3, 4, 5 ]
}

foo(1, 2, 3, 4, 5);
```

Rest νλΌλ―Έν„°λ” λ°λ“μ‹ λ§μ§€λ§‰ νλΌλ―Έν„°μ—¬μ•Ό ν•λ‹¤. κ·Έλ ‡μ§€ μ•μΌλ©΄ μ—λ¬λ¥Ό λ°μƒμ‹ν‚¨λ‹¤.

Rest νλΌλ―Έν„°λ” λ‹¨ ν•λ‚λ§ μ„ μ–Έν•  μ μλ‹¤.

Rest νλΌλ―Έν„°λ” ν•¨μ μ •μ μ‹ μ„ μ–Έν• λ§¤κ°λ³€μ κ°μλ¥Ό λ‚νƒ€λ‚΄λ” `length` ν”„λ΅νΌν‹°μ— μν–¥μ„ μ£Όμ§€ μ•λ”λ‹¤.

### Rest νλΌλ―Έν„°μ™€ `arguments` κ°μ²΄

`arguments`λ” μ μ‚¬ λ°°μ—΄ κ°μ²΄μ΄λ―€λ΅ λ°°μ—΄ λ©”μ„λ“λ¥Ό μ‚¬μ©ν•λ ¤λ©΄ `call`μ΄λ‚ `apply` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•΄ λ°°μ—΄λ΅ λ³€ν™ν•΄μ•Ό ν•λ‹¤.

```js
function sum() {
  // μ μ‚¬ λ°°μ—΄ κ°μ²΄μΈ arguments κ°μ²΄λ¥Ό λ°°μ—΄λ΅ λ³€ν™ν•λ‹¤.
  var array = Array.prototype.slice.call(arguments);

  return array.reduce(function (pre, cur) {
    return pre + cur;
  }, 0);
}

console.log(sum(1, 2, 3, 4, 5)); // 15
```

π’΅Rest νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•λ©΄ κ°€λ³€ μΈμ ν•¨μμ μΈμ λ©λ΅μ„ λ°°μ—΄λ΅ μ§μ ‘ λ°›μ„ μ μλ‹¤.

## 26.5 λ§¤κ°λ³€μ κΈ°λ³Έκ°’

μλ°”μ¤ν¬λ¦½νΈ μ—”μ§„μ€ λ§¤κ°λ³€μμ κ°μμ™€ μΈμμ κ°μλ¥Ό μ²΄ν¬ν•μ§€ μ•μ•„ μλ„μΉ μ•μ€ κ²°κ³Όλ¥Ό λ°μƒμ‹ν‚¬ μ μλ‹¤.

ES6μ—μ„ λ„μ…λ λ§¤κ°λ³€μ κΈ°λ³Έκ°’μ„ μ‚¬μ©ν•λ©΄ ν•¨μ λ‚΄μ—μ„ μν–‰ν•λ μΈμ μ²΄ν¬ λ° μ΄κΈ°ν™”λ¥Ό κ°„μ†ν™”ν•  μ μλ‹¤.

```js
function sum(x = 0, y = 0) {
  return x + y;
}
```

λ§¤κ°λ³€μ κΈ°λ³Έκ°’μ€ λ§¤κ°λ³€μμ— μΈμλ¥Ό μ „λ‹¬ν•μ§€ μ•μ•μ„ λ•μ™€ `undefined`λ¥Ό μ „λ‹¬ν• κ²½μ°μ—λ§ μ ν¨ν•λ‹¤.

Rest νλΌλ―Έν„°μ—λ” κΈ°λ³Έκ°’μ„ μ§€μ •ν•  μ μ—†λ‹¤.

λ§¤κ°λ³€μ κΈ°λ³Έκ°’μ€ `length` ν”„λ΅νΌν‹°μ™€ `arguments` κ°μ²΄μ— μ•„λ¬΄λ° μν–¥μ„ μ£Όμ§€ μ•λ”λ‹¤.
